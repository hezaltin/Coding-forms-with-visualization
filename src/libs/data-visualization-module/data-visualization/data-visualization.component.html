
<button class="btn btn-icon btn-sm" (click)="addProductComponent($event)">
                <clr-icon shape="add"></clr-icon>
        Add Filter</button>

<form [formGroup]="visualForm" class="clr-form clr-form-horizontal" autocomplete="off">
        <div class="filter-container"  formGroupName="filterControl" *ngFor="let productDropdown of filterControl.controls let dropdownndex=index">
        <div class="filter-field-control" [formGroup]="filterControl.controls[dropdownndex]">
                <div class="select" >
                        <select  class="select-wide" (change)="changeFIlterField($event,dropdownndex)"  formControlName="fieldId">
                                <option [value]="0" disabled="disabled" >
                                            {{productDropdown.value.name}}
                                </option>
                                <option *ngFor="let productlist of productList let proIndex=index" [value]="productlist">
                                        {{productlist}}
                                </option>
                        </select>
                </div>

                <div class="form-group form-group-visual">
                        <div class="clr-input-wrapper flex-box-class">
                                <input id="vizualizationCode" formControlName="fieldValues" placeholder="{{productDropdown.value.fieldId}}" class="clr-input" name="vizualizationCode" (focus)="focusField('rawMaterials')" (keydown)="keydownHandler($event,getFieldValues.bind(this))">

                                <app-data-visualization-dropdown *ngIf="focusedControl=='fieldVaues' && !blurControl" [formField]="'fieldVaues'" (formUpdateEvent)="formUpdate($event)" [filteredUsersTerms]="( ingredientsList$ | async )" [currentFocus]="currentFocusData"></app-data-visualization-dropdown>
                        </div>
                </div>

                <div class="form-group form-group-visual">
                        <div class="clr-input-wrapper flex-box-class">
                                <input id="vizualizationProductId" formControlName="productId" placeholder="{{productDropdown.value.fieldId}}" class="clr-input"
                                name="vizualizationProductId" (focus)="focusField('productId')" (keydown)="keydownHandler($event,getProductId.bind(this))">
                                
                                <app-data-visualization-dropdown *ngIf="focusedControl=='productId' && !blurControl" [formField]="'productId'" (formUpdateEvent)="formUpdate($event)" [filteredUsersTerms]="( ingredientsList$ | async )" [currentFocus]="currentFocusData"></app-data-visualization-dropdown>
                        </div>
                </div>

        </div>       
               
        </div>

</form>


<div class="card" *ngFor="let visual of getVisualData">
        <div class="card-block">
            <h4 class="card-title">{{visual?.fragment}}</h4>
            <p class="card-text">
                <small>ExternalProductName: <b>{{visual.externalProductName}}</b></small>
                <b>|</b>
                <small class="mb-1">InternalProductName: <b>{{visual.internalProductName}}</b></small>
            </p>
        </div>
        
</div>